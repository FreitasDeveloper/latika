create database if not exist db_latika;

use db_latika; 


CREATE TABLE tb_bairro (
  CODIGO int(11) NOT NULL,
  NOME varchar(100) NOT NULL,
  CIDADE varchar(50) NOT NULL DEFAULT 'Volta Redonda',
  TAXA_ENTREGA decimal(5,2) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;



CREATE TABLE tb_categoria (
  CODIGO int(11) NOT NULL,
  NOME varchar(30) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;


CREATE TABLE tb_cliente (
  CPF char(11) NOT NULL,
  NOME varchar(50) NOT NULL,
  TELEFONE varchar(11) NOT NULL,
  EMAIL varchar(200) NOT NULL,
  SENHA char(60) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;


CREATE TABLE tb_endereco (
  CODIGO int(11) NOT NULL,
  CPF_CLIENTE char(11) NOT NULL,
  ALIAS varchar(10) DEFAULT NULL,
  CODIGO_BAIRRO int(11) NOT NULL,
  RUA varchar(100) NOT NULL,
  NUMERO varchar(10) NOT NULL,
  COMPLEMENTO varchar(20) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;


CREATE TABLE tb_forma_pagamento (
  FORMA_PAGAMENTO varchar(10) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;


CREATE TABLE tb_funcionario (
  CPF char(11) NOT NULL,
  NOME varchar(50) NOT NULL,
  TELEFONE varchar(11) NOT NULL,
  EMAIL varchar(200) NOT NULL,
  SENHA char(60) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;


CREATE TABLE tb_item_pedido (
  CODIGO int(11) NOT NULL,
  CODIGO_PEDIDO int(11) NOT NULL,
  CPF_CLIENTE char(11) NOT NULL,
  QUANTIDADE int(11) NOT NULL DEFAULT 1,
  OBSERVACAO varchar(30) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;


CREATE TABLE tb_pedido (
  CODIGO int(11) NOT NULL,
  CPF_CLIENTE char(11) NOT NULL,
  DATA_HORA datetime NOT NULL,
  DATA_HORA_ENTREGA datetime NOT NULL,
  FORMA_PAGAMENTO varchar(10) NOT NULL,
  PAGO enum('S','N') NOT NULL,
  CODIGO_ENDERECO_ENTREGA int(11) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;


CREATE TABLE tb_produto (
  CODIGO int(11) NOT NULL,
  NOME varchar(50) NOT NULL,
  DESCRICAO varchar(100) NOT NULL,
  FOTO blob DEFAULT NULL,
  PRECO_VENDA decimal(10,2) NOT NULL,
  CODIGO_CATEGORIA int(11) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

create table tb_produtoDocarrinho (
codigo int(11) NOT NULL primary key,
nome varchar(100) NOT NULL,
descricao varchar(30) DEFAULT NULL, 
preco decimal(10,2) NOT NULL
);

ALTER TABLE tb_bairro
  ADD PRIMARY KEY ('CODIGO');


ALTER TABLE tb_categoria
  ADD PRIMARY KEY ('CODIGO');

ALTER TABLE tb_cliente
  ADD PRIMARY KEY ('CPF'),
  ADD UNIQUE KEY EMAIL ('EMAIL');

ALTER TABLE tb_endereco
  ADD PRIMARY KEY ('CODIGO'),
  ADD KEY CODIGO_BAIRRO ('CODIGO_BAIRRO');

ALTER TABLE tb_forma_pagamento
  ADD PRIMARY KEY ('FORMA_PAGAMENTO');

ALTER TABLE tb_funcionario
  ADD PRIMARY KEY ('CPF'),
  ADD UNIQUE KEY EMAIL ('EMAIL');


ALTER TABLE tb_item_pedido
  ADD PRIMARY KEY ('CODIGO'),
  ADD KEY CODIGO_PEDIDO ('CODIGO_PEDIDO'),
  ADD KEY CPF_CLIENTE ('CPF_CLIENTE');

ALTER TABLE tb_pedido
  ADD PRIMARY KEY ('CODIGO'),
  ADD KEY CPF_CLIENTE ('CPF_CLIENTE'),
  ADD KEY FORMA_PAGAMENTO ('FORMA_PAGAMENTO'),
  ADD KEY CODIGO_ENDERECO_ENTREGA ('CODIGO_ENDERECO_ENTREGA');

ALTER TABLE tb_produto
  ADD PRIMARY KEY ('CODIGO'),
  ADD KEY CODIGO_CATEGORIA ('CODIGO_CATEGORIA');


ALTER TABLE tb_bairro
  MODIFY CODIGO int(11) NOT NULL AUTO_INCREMENT;

ALTER TABLE tb_categoria
  MODIFY CODIGO int(11) NOT NULL AUTO_INCREMENT;

ALTER TABLE tb_endereco
  MODIFY CODIGO int(11) NOT NULL AUTO_INCREMENT;

ALTER TABLE tb_item_pedido
  MODIFY CODIGO int(11) NOT NULL AUTO_INCREMENT;

ALTER TABLE tb_pedido
  MODIFY CODIGO int(11) NOT NULL AUTO_INCREMENT;

ALTER TABLE tb_produto
  MODIFY CODIGO int(11) NOT NULL AUTO_INCREMENT;